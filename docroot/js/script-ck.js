/*######################################################################
#	JAVASCRIPT/JQUERY Shared Library
#
#
#	@Table of Contents:
#		Element Bindings
#		SYSTEM FUNCTIONS
#		UTILITY FUNCTIONS
#		FORMS BINDINGS
#		NOTIFICATION WIDGET BINDINGS AND FUNCTIONS
#
######################################################################*//*######################################################################
#	ELEMENT BINDINGS START
#
#	@CONTENTS
#		docReady() - Well not really but essentially;
#			heroDropdowns
#			carousel
#			accordian
#			pullquote
#			image Handling
#
######################################################################*/function toggleHero(e){var t=$("div#js-shopping-dropdown"),n=$("div#js-search-dropdown"),r=$("#js-hero-dropdowns"),i=$("a#js-shopping-toggle"),s=$("a#js-search-toggle");if($(r).hasClass("show"))switch(e.show){case"shopBox":if($(n).hasClass("show")){s.parent().removeClass("active");n.css("position","absolute").fadeOut("fast",function(){$(n).removeClass("show");$(n).addClass("hide");$(n).removeAttr("style");i.parent().addClass("active");t.fadeIn("fast",function(){$(t).removeClass("hide");$(t).addClass("show");$(t).removeAttr("style")})})}else if($(t).hasClass("show")){i.parent().removeClass("active");s.parent().removeClass("active");r.fadeOut("slow",function(){r.removeClass("show");r.addClass("hide")})}break;case"searchBox":if($(t).hasClass("show")){i.parent().removeClass("active");t.fadeOut("fast",function(){$(t).removeClass("show");$(t).addClass("hide");$(t).removeAttr("style");s.parent().addClass("active");n.fadeIn("fast",function(){$(this).css("position","relative");$(n).removeClass("hide");$(n).addClass("show");$(n).removeAttr("style")})})}else if($(n).hasClass("show")){i.parent().removeClass("active");s.parent().removeClass("active");r.fadeOut("slow",function(){r.removeClass("show");r.addClass("hide")})}}else{switch(e.show){case"shopBox":if($(n).hasClass("show")){$(n).removeClass("show");n.css("position","absolute").addClass("hide");$(t).removeClass("hide");$(t).addClass("show");i.parent().addClass("active")}i.parent().addClass("active");break;case"searchBox":if($(t).hasClass("show")){$(t).removeClass("show");t.addClass("hide");n.css("position","relative").addClass("show");$(n).removeClass("hide")}s.parent().addClass("active")}r.fadeIn("slow",function(){r.removeClass("hide");r.addClass("show")})}}function setDemographics(e){typeof e!="null"&&$.ajax({url:"/user/setdemographics/zipcode/"+e,success:function(t){typeof e!="null"&&$.ajax({url:"/user/setregion/region/OR",success:function(e){},error:function(e,t,n){}})},error:function(e,t,n){}})}function validateRequired(e,t){if(typeof e=="function"){t=e;e=""}else e="#"+e;var n=!0;$(e+" .required").each(function(e){if($(this).val()===""){n=!1;$(this).addClass("alertInvalid");$(this).hasClass("fancySelect")&&$(this).prev("div .fancySelect").addClass("alertInvalid")}else{if($(this).hasClass("alertInvalid")){$(this).removeClass("alertInvalid");$(this).hasClass("fancySelect")&&$(this).prev("div .fancySelect").removeClass("alertInvalid")}if($(this).attr("prepop")&&$(this).attr("prepop")===$(this).val()){n=!1;$(this).addClass("alertInvalid")}if($(this).attr("minLength")){$(".lengthNote").length<1?$(this).after('<div class="lengthNote validationAlert"><div>'):$(".lengthNote").html("");if($(this).attr("minLength")>$(this).val().length){n=!1;$(this).addClass("alertInvalid");$(".lengthNote").html("The value must be at least "+$(this).attr("minLength")+" characters long")}else $(".lengthNote").html("")}if($(this).attr("compare")){$(".compareNote").length<1?$(this).after('<div class="compareNote validationAlert"><div>'):$(".compareNote").html("");if($("#"+$(this).attr("compare")).val()!==$(this).val()){n=!1;$(this).addClass("alertInvalid");$(".compareNote").html("The values must match")}}if($(this).attr("emailField")){$(".emailNote").length<1?$(this).after('<div class="emailNote validationAlert"><div>'):$(".emailNote").html("");var t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if(!t.test($(this).val())){n=!1;$(this).addClass("alertInvalid");$(".emailNote").html("The value must be an email address")}}if($(this).attr("numericField")){$(".numericNote").length<1?$(this).after('<div class="numericNote validationAlert"><div>'):$(".numericNote").html("");var r=/^-{0,1}\d*\.{0,1}\d+$/;if(!r.test($(this).val())){n=!1;$(this).addClass("alertInvalid");$(".numericNote").html("The value must be a number")}}if($(this).attr("dollarField")){$(".dollarNote").length<1?$(this).after('<div class="dollarNote validationAlert"><div>'):$(".dollarNote").html("");var r=/^\d*\.{0,1}\d+$/;if(!r.test($(this).val())||$(this).val()<.01){n=!1;$(this).addClass("alertInvalid");$(".dollarNote").html("The value must be a dollar amount")}}}});typeof t=="function"&&t.call(this,n);return n}function getRegionFromZip(e,t){$.ajax({url:"/user/getdemographics/zipcode/"+e,dataType:"JSON",success:function(e){switch(e.value){case"ERROR":switch(e.error){case"COUNTY_CHALLENGE":var n={event:"refine",data:"data.counties"};break;case"OUT_OF_AREA_ERROR":var n={event:"error",data:"region_issue"};break;case"WRONG_BRAND":var n={event:"error",data:"wrong_brand"};break;default:var n={event:"error",data:"region_issue"}}break;default:switch(e.area){case"clark_co":var n={event:"success",data:"CC"};break;case"wa":var n={event:"success",data:"WW"};break;case"asuris":var n={event:"success",data:"EW"};break;default:var n={event:"success",data:e.value}}}typeof t=="function"&&t.call(this,n)}});return!1}function print_r(e,t){if(!t)var t=" ";else t+="   ";$.each(e,function(n,r){console.log(t+"["+n+"] => "+r+" {"+typeof e+"}");r&&(typeof e[n]=="array"||typeof e[n]=="object")&&print_r(e[n],t)})}function notification_closeAndCookie(e){$.ajax({url:"/user/hidenotification/id/"+e.notification_id,success:function(e){},error:function(e,t,n){}})}function buildInjectedForm(e){var t=e.trigger_id,n=e.trigger_key,r=e.injectable,i=e.form_url;$(t).length!==0&&$(t).load(i+"?modal=true");return!1}function setPersonalization(e){zipcodeValue=e.zipcode;audienceValue=e.audience;redirectPageValue=e.redirectPage;typeof zipcodeValue!="null"&&getRegionFromZip(zipcodeValue,function(e){if(e.event==="success")$.ajax({url:"/user/setdemographics/zipcode/"+zipcodeValue,success:function(t){resizeHero("contract");$.ajax({url:"/user/setregion/region/"+e.data,success:function(e){typeof audienceValue!="null"&&$.ajax({url:"/user/setaudience/audience/"+audienceValue,success:function(e){redirectPageValue?window.location.href="/"+audienceValue+"/":window.location.reload()},error:function(e,t,n){}})},error:function(e,t,n){}})},error:function(e,t,n){}});else if(e.event==="refine")alert("County Challenge");else{e.data==="region_issue"&&resizeHero("expand","region_issue");e.data==="wrong_brand"&&resizeHero("expand","wrong_brand")}})}function resizeHero(e,t){if(typeof t!="undefined")switch(t){case"invalid":var n="<span><h4>Error!</h4>You must enter a zipcode to use this form.</span>";break;case"region_issue":var n='<span>We do not offer health insurance plans to residents of the zip code you entered. You can find a Blue Cross and Blue Shield company near you at <a href="http://www.bcbs.com"><span class="alert-error">www.bcbs.com</span></a></span>';break;case"wrong_brand":var n='<span>We do not offer health insurance plans to residents of the zip code you entered. You can find a Blue Cross and Blue Shield company near you at <a href="http://www.bcbs.com"><span class="alert-error">www.bcbs.com</span></a></span>'}if(e==="expand"){if(!$("#zip-personalize").hasClass("invalid")){$("#zip-personalize").addClass("invalid");$("#audience_dropdown_alert").html('<div class="alert alert-error right article" id="hero_error"><span class="fs1" aria-hidden="true" data-icon="2" style="float:left;margin-right:20px;"></span><button type="button" class="close" data-dismiss="alert">&#215;</button>'+n);$("#hero_error .close").click(function(e){resizeHero("contract")});$("#js-hero-dropdowns").height($("#js-hero-dropdowns").height()+76)}}else if($("#zip-personalize").hasClass("invalid")){$("#zip-personalize").removeClass("invalid");$("#audience_dropdown_alert").html("");$("#js-hero-dropdowns").height($("#js-hero-dropdowns").height()-76)}}$(function(){var e=$("#js-hero-dropdowns"),t=$("a#js-shopping-toggle"),n=$("a#js-search-toggle"),r=e.height();e.css({height:r});$(window).on("resize",function(){e.css("height","auto");r=e.height();e.css({height:r})});t.on("click",function(){t.toggleHero({show:"shopBox"})});n.on("click",function(){n.toggleHero({show:"searchBox"})});$("#dropdown-personalize > li").click(function(){var e=$(this).attr("id").split("_"),t=e[0]+"_toggle";$("#personalization_audience_dropdown").text($(this).text());$("#personalization_audience_dropdown").attr("selected_id",t);$("#personalization_audience_dropdown").addClass("changed");$("#personalization_audience_dropdown").parent().removeClass("open")});var i=$("div.carousel");i.carousel({interval:8e3}).on("click","[data-to]",function(e){$this=$(this);var t=$this.attr("data-to")-1;i.carousel(t).find("[data-to]").removeClass("active");$this.addClass("active");e.preventDefault()}).bind("slid",function(){var e=$("div.carousel div.active").index("div.carousel div.item")+1;i.find("[data-to]").removeClass("active");$("[data-to="+e+"]").addClass("active")});$("div.accordion").on("show",function(e){$(e.target).prev("div.accordion-heading").find("a.accordion-toggle").addClass("active")}).on("hide",function(e){$(this).find("a.accordion-toggle").not($(e.target)).removeClass("active")});$("span.pullquote").each(function(){var e=$(this).parent("p"),t=$(this).text(),n=$("<p>").text(t);e.css("position","relative");$('<blockquote class="pull-right">').html(n).prependTo(e)});$(".image img").height("auto").width("100%");$("div.image-responsive").each(function(){var e=$("div.image-responsive"),t=e.css("background-image").replace(/"/g,"").replace(/url\(|\)$/ig,"");$(this).hasClass("focus-center")&&e.anystretch(t);$(this).hasClass("focus-left")&&e.anystretch(t,{positionX:"left"});$(this).hasClass("focus-right")&&e.anystretch(t,{positionX:"right"})});$("img.image-responsive").each(function(){var e=$("img.image-responsive"),t=e.hide().attr("src");$(this).hasClass("focus-center")&&e.parent().anystretch(t);$(this).hasClass("focus-left")&&e.parent().anystretch(t,{positionX:"left"});$(this).hasClass("focus-right")&&e.parent().anystretch(t,{positionX:"right"})});$("a.external").on("click",function(){window.open(this.href,"_blank");return!1}).append('&nbsp;<span class="icon-external" aria-hidden="true"></span>');$("a.toggle-reveal").on("click",function(){var e=$(this).closest(".preview-container");$(e).find(".reveal").toggleClass("hide");return!1});$(".tooltip-container").tooltip({selector:"[rel=tooltip]"});$(".injected_form").each(function(){$(this).buildInjectedForm()});$(".null_state_block").length!==0&&$("#personalization_message").html("<h1>Relax.</h1><p>We'll only ask you once to tell us what kind of information you're looking for and where you are.</p>")});$.fn.toggleHero=function(e){if(typeof e=="undefined")var e=new Object;e.thisElement="#"+$(this).attr("id");e.tKey=$(this).attr("id");toggleHero(e)};$.fn.buildInjectedForm=function(e){if(typeof e=="undefined")var e=new Object;e.trigger_id="#"+$(this).attr("trigger_id");e.trigger_key=$(this).attr("trigger_id");e.form_url=$(this).attr("form_url");e.injectable=$(this).html();buildInjectedForm(e)};$(".notification_widget_close").on("click",function(){params={notification_id:$(this).parent().attr("id")};notification_closeAndCookie(params)});$(function(){$("#form-personalize").submit(function(e){e.preventDefault();if($("#zip-personalize").val()!==""){resizeHero("contract");audienceArray=$("#personalization_audience_dropdown").attr("selected_id").split("_");params={zipcode:$("#zip-personalize").val(),audience:audienceArray[0],redirectPage:!1};if($("#personalization_audience_dropdown").hasClass("changed")&&$("#personalization_message").hasClass("returning")||$("#personalization_message").hasClass("new"))params.redirectPage="true";setPersonalization(params)}else resizeHero("expand","invalid")});$("#form-search").submit(function(e){e.preventDefault();if($("#search-query").val()!==""){$("#search-query").hasClass("error")&&$("#search-query").removeClass("error");alert("Search for Value: "+$("#search-query").val())}else $("#search-query").addClass("error")});$(document).on("submit",".email-form",function(e){e.preventDefault();var t=$('.email-form button[type="submit"]').html(),n='<img src="../images/forms/polyfill-loader.gif" border="0" style="height:100%;width:100%">';$('.email-form button[type="submit"]').html(n);$(".email-form :input").attr("disabled","");$.post("/forms/send/",$(this).serialize()).success(function(){$(".form-body").html("");$.ajax({url:"/messages/getmessage/key/emailFormSubmitted/",success:function(e){$("<div>",{"class":"well well-large"}).html(e).appendTo(".form-body");$(".email-form :input").removeAttr("disabled");if($(".email-form").hasClass("modal_form")){$(".modal_submit").addClass("hide");$(".modal_cancel").html("Close")}}})}).error(function(){$(".form-body").html("");$.ajax({url:"/messages/getmessage/key/emailFormError/",success:function(e){$("<div>",{"class":"well well-large"}).html(e).appendTo(".form-body");$(".email-form :input").removeAttr("disabled");$(".email-form").hasClass("modal_form")&&$("#"+$(".email-form").parent().parent().parent().attr("id")).modal("toggle")}})})});$(document).on("change",".anonymous",function(){if($(this).attr("checked")){$(".anonymous_block").addClass("show");$(".anonymous_block").removeClass("hide")}else{$(".anonymous_block").addClass("hide");$(".anonymous_block").removeClass("show")}});$(document).on("change","#quality_concerns_consent",function(){if($(this).val()==="Yes"){$("#consent_block").addClass("show");$("#consent_block").removeClass("hide")}else{$("#consent_block").addClass("hide");$("#consent_block").removeClass("show")}});$(document).on("submit","#providerSearch",function(e){e.preventDefault();window.location.href="http://www.regence.com/public/psearch/quickSearch.do?eventTarget=quickSearch&eventArgument=&selectedResultsPerPage=-1&sortArgument=default&selectedSpecialtyTypeId=&selectedSpecialtyId=&stcd=OR&nwk=&searchType=quickSearch&name="+$("#providerSearch #clinicName").val()+"&location="+$("#providerSearch #clinicLocation").val()+"&specialty="+$("#providerSearch #clinicSpecialty").val()+"&searchSubmit=Search"})});