(function(e){var t=window.Modernizr,n=e.webshims,r=n.bugs,i=e('<form action="#" style="width: 1px; height: 1px; overflow: hidden;"><select name="b" required="" /><input required="" name="a" /></form>'),s=function(){if(i[0].querySelector)try{r.findRequired=!i[0].querySelector("select:required")}catch(e){r.findRequired=!1}},o=e("input",i).eq(0),u=function(e){n.loader.loadList(["dom-extend"]);n.ready("dom-extend",e)};r.findRequired=!1;r.validationMessage=!1;n.capturingEventPrevented=function(t){if(!t._isPolyfilled){var n=t.isDefaultPrevented,r=t.preventDefault;t.preventDefault=function(){clearTimeout(e.data(t.target,t.type+"DefaultPrevented"));e.data(t.target,t.type+"DefaultPrevented",setTimeout(function(){e.removeData(t.target,t.type+"DefaultPrevented")},30));return r.apply(this,arguments)};t.isDefaultPrevented=function(){return!!n.apply(this,arguments)||!!e.data(t.target,t.type+"DefaultPrevented")};t._isPolyfilled=!0}};if(!t.formvalidation||r.bustedValidity)s();else{n.capturingEvents(["input"]);n.capturingEvents(["invalid"],!0);if(window.opera||window.testGoodWithFix)i.appendTo("head"),s(),r.validationMessage=!o.prop("validationMessage"),n.reTest(["form-extend","form-message"]),i.remove(),e(function(){u(function(){var t=function(e){e.preventDefault()};["form","input","textarea","select"].forEach(function(r){var i=n.defineNodeNameProperty(r,"checkValidity",{prop:{value:function(){n.fromSubmit||e(this).on("invalid.checkvalidity",t);n.fromCheckValidity=!0;var r=i.prop._supvalue.apply(this,arguments);n.fromSubmit||e(this).unbind("invalid.checkvalidity",t);n.fromCheckValidity=!1;return r}}})})})});e.browser.webkit&&!n.bugs.bustedValidity&&function(){var t=/^(?:textarea|input)$/i,n=!1;document.addEventListener("contextmenu",function(e){t.test(e.target.nodeName||"")&&(n=e.target.form)&&setTimeout(function(){n=!1},1)},!1);e(window).on("invalid",function(e){e.originalEvent&&n&&n==e.target.form&&(e.wrongWebkitInvalid=!0,e.stopImmediatePropagation())})}()}})(jQuery);jQuery.webshims.register("form-core",function(e,t,n,r,i,s){var o={radio:1},u={checkbox:1,radio:1},a=e([]),f=t.bugs,l=function(t){var t=e(t),n,i;n=a;o[t[0].type]&&(i=t.prop("form"),n=(n=t[0].name)?i?e(i[n]):e(r.getElementsByName(n)).filter(function(){return!e.prop(this,"form")}):t,n=n.filter('[type="radio"]'));return n},c=t.getContentValidationMessage=function(t,n,r){var i=e(t).data("errormessage")||t.getAttribute("x-moz-errormessage")||"";r&&i[r]&&(i=i[r]);"object"==typeof i&&(n=n||e.prop(t,"validity")||{valid:1},n.valid||e.each(n,function(e,t){if(t&&"valid"!=e&&i[e])return i=i[e],!1}));"object"==typeof i&&(i=i.defaultMessage);return i||""},h={number:1,range:1,date:1},p=function(t){var n=!1;e(e.prop(t,"elements")).each(function(){if(n=e(this).is(":invalid"))return!1});return n};e.extend(e.expr[":"],{"valid-element":function(t){return e.nodeName(t,"form")?!p(t):!!e.prop(t,"willValidate")&&!!v(t)},"invalid-element":function(t){return e.nodeName(t,"form")?p(t):!!e.prop(t,"willValidate")&&!v(t)},"required-element":function(t){return!!e.prop(t,"willValidate")&&!!e.prop(t,"required")},"user-error":function(t){return e.prop(t,"willValidate")&&e(t).hasClass("user-error")},"optional-element":function(t){return!!e.prop(t,"willValidate")&&!1===e.prop(t,"required")},"in-range":function(t){if(!h[e.prop(t,"type")]||!e.prop(t,"willValidate"))return!1;t=e.prop(t,"validity");return!(!t||t.rangeOverflow||t.rangeUnderflow)},"out-of-range":function(t){if(!h[e.prop(t,"type")]||!e.prop(t,"willValidate"))return!1;t=e.prop(t,"validity");return!(!t||!t.rangeOverflow&&!t.rangeUnderflow)}});["valid","invalid","required","optional"].forEach(function(t){e.expr[":"][t]=e.expr.filters[t+"-element"]});e.expr[":"].focus=function(e){try{var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())}catch(n){}return!1};var d=e.event.customEvent||{},v=function(t){return(e.prop(t,"validity")||{valid:1}).valid};(f.bustedValidity||f.findRequired)&&function(){var t=e.find,n=e.find.matchesSelector,i=/(\:valid|\:invalid|\:optional|\:required|\:in-range|\:out-of-range)(?=[\s\[\~\.\+\>\:\#*]|$)/ig,s=function(e){return e+"-element"};e.find=function(){var e=Array.prototype.slice,n=function(n){var r=arguments,r=e.call(r,1,r.length);r.unshift(n.replace(i,s));return t.apply(this,r)},r;for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}();if(!Modernizr.prefixed||Modernizr.prefixed("matchesSelector",r.documentElement))e.find.matchesSelector=function(e,t){t=t.replace(i,s);return n.call(this,e,t)}}();var m=e.prop,g={selectedIndex:1,value:1,checked:1,disabled:1,readonly:1};e.prop=function(t,n,r){var s=m.apply(this,arguments);t&&"form"in t&&g[n]&&r!==i&&e(t).hasClass(w)&&v(t)&&(e(t).getShadowElement().removeClass(E),"checked"==n&&r&&l(t).not(t).removeClass(E).removeAttr("aria-invalid"));return s};var y=function(t,n){var r;e.each(t,function(t,i){if(i)return r="customError"==t?e.prop(n,"validationMessage"):t,!1});return r},b=function(e){var t;try{t=r.activeElement.name===e}catch(n){}return t},w="user-error",E="user-error form-ui-invalid";e(r).on(s.validityUIEvents||"focusout change refreshvalidityui",function(t){var n,r;if(t.target&&(n=e(t.target).getNativeElement()[0],"submit"!=n.type&&e.prop(n,"willValidate"))){r=e.data(n,"webshimsswitchvalidityclass");var i=function(){if("focusout"!=t.type||"radio"!=n.type||!b(n.name)){var r=e.prop(n,"validity"),i=e(n).getShadowElement(),s,o,a,f;e(n).trigger("refreshCustomValidityRules");r.valid?i.hasClass("user-success")||(s="user-success form-ui-valid",o=E,f="changedvaliditystate",a="changedvalid",u[n.type]&&n.checked&&l(n).not(n).removeClass(o).addClass(s).removeAttr("aria-invalid"),e.removeData(n,"webshimsinvalidcause")):(r=y(r,n),e.data(n,"webshimsinvalidcause")!=r&&(e.data(n,"webshimsinvalidcause",r),f="changedvaliditystate"),i.hasClass(w)||(s=E,o="user-success form-ui-valid",u[n.type]&&!n.checked&&l(n).not(n).removeClass(o).addClass(s),a="changedinvalid"));s&&(i.addClass(s).removeClass(o),setTimeout(function(){e(n).trigger(a)},0));f&&setTimeout(function(){e(n).trigger(f)},0);e.removeData(t.target,"webshimsswitchvalidityclass")}};r&&clearTimeout(r);"refreshvalidityui"==t.type?i():e.data(n,"webshimsswitchvalidityclass",setTimeout(i,9))}});d.changedvaliditystate=!0;d.refreshCustomValidityRules=!0;d.changedvalid=!0;d.changedinvalid=!0;d.refreshvalidityui=!0;t.triggerInlineForm=function(t,n){e(t).trigger(n)};t.modules["form-core"].getGroupElements=l;f=function(){t.scrollRoot=e.browser.webkit||"BackCompat"==r.compatMode?e(r.body):e(r.documentElement)};f();t.ready("DOM",f);t.getRelOffset=function(t,n){var t=e(t),r=e(n).offset(),i;e.swap(e(t)[0],{visibility:"hidden",display:"inline-block",left:0,top:0},function(){i=t.offset()});r.top-=i.top;r.left-=i.left;return r};t.validityAlert=function(){var i=!e.browser.msie||7<parseInt(e.browser.version,10)?"span":"label",s,o=!1,u=!1,a,f={hideDelay:5e3,showFor:function(t,r,i,s){f._create();var t=e(t),l=e(t).getShadowElement(),c=f.getOffsetFromBody(l);f.clear();s?this.hide():(this.getMessage(t,r),this.position(l,c),this.show(),this.hideDelay&&(o=setTimeout(a,this.hideDelay)),e(n).on("resize.validityalert",function(){clearTimeout(u);u=setTimeout(function(){f.position(l)},9)}));i||this.setFocus(l,c)},getOffsetFromBody:function(e){return t.getRelOffset(s,e)},setFocus:function(n,o){var u=e(n).getShadowFocusElement(),f=t.scrollRoot.scrollTop(),l=(o||u.offset()).top-30,c;t.getID&&"label"==i&&s.attr("for",t.getID(u));f>l&&(t.scrollRoot.animate({scrollTop:l-5},{queue:!1,duration:Math.max(Math.min(600,1.5*(f-l)),80)}),c=!0);try{u[0].focus()}catch(h){}c&&(t.scrollRoot.scrollTop(f),setTimeout(function(){t.scrollRoot.scrollTop(f)},0));setTimeout(function(){e(r).on("focusout.validityalert",a)},10)},getMessage:function(t,n){n||(n=c(t[0])||t.prop("validationMessage"));n?e("span.va-box",s).text(n):this.hide()},position:function(t,n){n=n?e.extend({},n):f.getOffsetFromBody(t);n.top+=t.outerHeight();s.css(n)},show:function(){"none"===s.css("display")&&s.css({opacity:0}).show();s.addClass("va-visible").fadeTo(400,1)},hide:function(){s.removeClass("va-visible").fadeOut()},clear:function(){clearTimeout(!1);clearTimeout(o);e(r).unbind(".validityalert");e(n).unbind(".validityalert");s.stop().removeAttr("for")},_create:function(){s||(s=f.errorBubble=e("<"+i+' class="validity-alert-wrapper" role="alert"><span  class="validity-alert"><span class="va-arrow"><span class="va-arrow-box"></span></span><span class="va-box"></span></span></'+i+">").css({position:"absolute",display:"none"}),t.ready("DOM",function(){s.appendTo("body");e.fn.bgIframe&&e.browser.msie&&7>parseInt(e.browser.version,10)&&s.bgIframe()}))}};a=e.proxy(f,"hide");return f}();(function(){var t,n=[],i;e(r).on("invalid",function(s){if(!s.wrongWebkitInvalid){var o=e(s.target),u=o.getShadowElement();u.hasClass(w)||(u.addClass(E).removeClass("user-success form-ui-valid"),setTimeout(function(){e(s.target).trigger("changedinvalid").trigger("changedvaliditystate")},0));t||(t=e.Event("firstinvalid"),t.isInvalidUIPrevented=s.isDefaultPrevented,u=e.Event("firstinvalidsystem"),e(r).triggerHandler(u,{element:s.target,form:s.target.form,isInvalidUIPrevented:s.isDefaultPrevented}),o.trigger(t));t&&t.isDefaultPrevented()&&s.preventDefault();n.push(s.target);s.extraData="fix";clearTimeout(i);i=setTimeout(function(){var r={type:"lastinvalid",cancelable:!1,invalidlist:e(n)};t=!1;n=[];e(s.target).trigger(r,r)},9);u=o=null}})})();e.fn.getErrorMessage=function(){var t="",n=this[0];n&&(t=c(n)||e.prop(n,"customValidationMessage")||e.prop(n,"validationMessage"));return t};s.replaceValidationUI&&t.ready("DOM forms",function(){e(r).on("firstinvalid",function(t){t.isInvalidUIPrevented()||(t.preventDefault(),e.webshims.validityAlert.showFor(t.target,e(t.target).prop("customValidationMessage")))})})});