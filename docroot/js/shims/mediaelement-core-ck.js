(function(e,t,n){var r=t.audio&&t.video,i=!1,s=n.cfg.mediaelement,o=n.bugs,u="jwplayer"==s.player?"mediaelement-swf":"mediaelement-jaris",a=function(){n.ready(u,function(){n.mediaelement.createSWF||(n.mediaelement.loadSwf=!0,n.reTest([u],r))})},f;if(r){var l=document.createElement("video");t.videoBuffered="buffered"in l;i="loop"in l;n.capturingEvents("play,playing,waiting,paused,ended,durationchange,loadedmetadata,canplay,volumechange".split(","));t.videoBuffered||(n.addPolyfill("mediaelement-native-fix",{f:"mediaelement",test:t.videoBuffered,d:["dom-support"]}),n.reTest("mediaelement-native-fix"))}if(r&&!s.preferFlash){var c=function(t){var r=t.target.parentNode;!s.preferFlash&&(e(t.target).is("audio, video")||r&&e("source:last",r)[0]==t.target)&&n.ready("DOM mediaelement",function(){f&&a();n.ready("WINDOWLOAD "+u,function(){setTimeout(function(){f&&!s.preferFlash&&n.mediaelement.createSWF&&!e(t.target).closest("audio, video").is(".nonnative-api-active")?(s.preferFlash=!0,document.removeEventListener("error",c,!0),e("audio, video").mediaLoad(),n.info("switching mediaelements option to 'preferFlash', due to an error with native player: "+t.target.src)):f||document.removeEventListener("error",c,!0)},20)})})};document.addEventListener("error",c,!0);e("audio, video").each(function(){this.error&&c({target:this})})}o.track=!1;t.track&&function(){o.track||(o.track="number"!=typeof e("<track />")[0].readyState);if(!o.track)try{new TextTrackCue(2,3,"")}catch(t){o.track=!0}var r=n.cfg.track,i=function(t){e(t.target).filter("track").each(s)},s=function(){if(o.track||!r.override&&3==e.prop(this,"readyState"))r.override=!0,n.reTest("track"),document.removeEventListener("error",i,!0),this&&e.nodeName(this,"track")?n.error("track support was overwritten. Please check your vtt including your vtt mime-type"):n.info("track support was overwritten. due to bad browser support")},u=function(){document.addEventListener("error",i,!0);o.track?s():e("track").each(s)};r.override||(n.isReady("track")?u():e(u))}();n.register("mediaelement-core",function(e,n,l,c,h){f=swfobject.hasFlashPlayerVersion("9.0.115");var d=n.mediaelement,v=function(t,n){var t=e(t),r={src:t.attr("src")||"",elem:t,srcProp:t.prop("src")};if(!r.src)return r;var i=t.attr("type");if(i)r.type=i,r.container=e.trim(i.split(";")[0]);else if(n||(n=t[0].nodeName.toLowerCase(),"source"==n&&(n=(t.closest("video, audio")[0]||{nodeName:"video"}).nodeName.toLowerCase())),i=d.getTypeForSrc(r.src,n))r.type=i,r.container=i;if(i=t.attr("media"))r.media=i;return r},g=!f&&"postMessage"in l&&r,y=function(){var t;return function(){!t&&g&&(t=!0,n.loader.loadScript("https://www.youtube.com/player_api"),e(function(){n.polyfill("mediaelement-yt")}))}}(),b=function(){f?a():y()};n.addPolyfill("mediaelement-yt",{test:!g,d:["dom-support"]});d.mimeTypes={audio:{"audio/ogg":["ogg","oga","ogm"],'audio/ogg;codecs="opus"':"opus","audio/mpeg":["mp2","mp3","mpga","mpega"],"audio/mp4":"mp4,mpg4,m4r,m4a,m4p,m4b,aac".split(","),"audio/wav":["wav"],"audio/3gpp":["3gp","3gpp"],"audio/webm":["webm"],"audio/fla":["flv","f4a","fla"],"application/x-mpegURL":["m3u8","m3u"]},video:{"video/ogg":["ogg","ogv","ogm"],"video/mpeg":["mpg","mpeg","mpe"],"video/mp4":["mp4","mpg4","m4v"],"video/quicktime":["mov","qt"],"video/x-msvideo":["avi"],"video/x-ms-asf":["asf","asx"],"video/flv":["flv","f4v"],"video/3gpp":["3gp","3gpp"],"video/webm":["webm"],"application/x-mpegURL":["m3u8","m3u"],"video/MP2T":["ts"]}};d.mimeTypes.source=e.extend({},d.mimeTypes.audio,d.mimeTypes.video);d.getTypeForSrc=function(t,n){if(-1!=t.indexOf("youtube.com/watch?")||-1!=t.indexOf("youtube.com/v/"))return"video/youtube";var t=t.split("?")[0].split("."),t=t[t.length-1],r;e.each(d.mimeTypes[n],function(e,n){if(-1!==n.indexOf(t))return r=e,!1});return r};d.srces=function(t,n){t=e(t);if(!n){var n=[],r=t[0].nodeName.toLowerCase(),i=v(t,r);i.src?n.push(i):e("source",t).each(function(){i=v(this,r);i.src&&n.push(i)});return n}t.removeAttr("src").removeAttr("type").find("source").remove(),e.isArray(n)||(n=[n]),n.forEach(function(e){var n=c.createElement("source");"string"==typeof e&&(e={src:e});n.setAttribute("src",e.src);e.type&&n.setAttribute("type",e.type);e.media&&n.setAttribute("media",e.media);t.append(n)})};e.fn.loadMediaSrc=function(t,n){return this.each(function(){n!==h&&(e(this).removeAttr("poster"),n&&e.attr(this,"poster",n));d.srces(this,t);e(this).mediaLoad()})};d.swfMimeTypes="video/3gpp,video/x-msvideo,video/quicktime,video/x-m4v,video/mp4,video/m4p,video/x-flv,video/flv,audio/mpeg,audio/aac,audio/mp4,audio/x-m4a,audio/m4a,audio/mp3,audio/x-fla,audio/fla,youtube/flv,jwplayer/jwplayer,video/youtube".split(",");d.canThirdPlaySrces=function(t,n){var r="";if(f||g)t=e(t),n=n||d.srces(t),e.each(n,function(e,t){if(t.container&&t.src&&(f&&-1!=d.swfMimeTypes.indexOf(t.container)||g&&"video/youtube"==t.container))return r=t,!1});return r};var E={};d.canNativePlaySrces=function(t,n){var i="";if(r){var t=e(t),s=(t[0].nodeName||"").toLowerCase();if(!E[s])return i;n=n||d.srces(t);e.each(n,function(e,n){if(n.type&&E[s].prop._supvalue.call(t[0],n.type))return i=n,!1})}return i};d.setError=function(t,r){r||(r="can't play sources");e(t).pause().data("mediaerror",r);n.warn("mediaelementError: "+r);setTimeout(function(){e(t).data("mediaerror")&&e(t).trigger("mediaerror")},1)};var S=function(){var e;return function(t,r,i){n.ready(f?u:"mediaelement-yt",function(){d.createSWF?d.createSWF(t,r,i):e||(e=!0,b(),S(t,r,i))});!e&&g&&!d.createSWF&&y()}}(),x=function(e,t,n,r,i){n||!1!==n&&t&&"third"==t.isActive?(n=d.canThirdPlaySrces(e,r))?S(e,n,t):i?d.setError(e,!1):x(e,t,!1,r,!0):(n=d.canNativePlaySrces(e,r))?t&&"third"==t.isActive&&d.setActive(e,"html5",t):i?(d.setError(e,!1),t&&"third"==t.isActive&&d.setActive(e,"html5",t)):x(e,t,!0,r,!0)},T=/^(?:embed|object|datalist)$/i,N=function(t,r){var i=n.data(t,"mediaelementBase")||n.data(t,"mediaelementBase",{}),o=d.srces(t),u=t.parentNode;clearTimeout(i.loadTimer);e.data(t,"mediaerror",!1);o.length&&u&&1==u.nodeType&&!T.test(u.nodeName||"")&&(r=r||n.data(t,"mediaelement"),x(t,r,s.preferFlash||h,o))};e(c).on("ended",function(t){var r=n.data(t.target,"mediaelement");(!i||r&&"html5"!=r.isActive||e.prop(t.target,"loop"))&&setTimeout(function(){!e.prop(t.target,"paused")&&e.prop(t.target,"loop")&&e(t.target).prop("currentTime",0).play()},1)});i||n.defineNodeNamesBooleanProperty(["audio","video"],"loop");["audio","video"].forEach(function(t){var i=n.defineNodeNameProperty(t,"load",{prop:{value:function(){var e=n.data(this,"mediaelement");N(this,e);r&&(!e||"html5"==e.isActive)&&i.prop._supvalue&&i.prop._supvalue.apply(this,arguments)}}});E[t]=n.defineNodeNameProperty(t,"canPlayType",{prop:{value:function(n){var i="";r&&E[t].prop._supvalue&&(i=E[t].prop._supvalue.call(this,n),"no"==i&&(i=""));!i&&f&&(n=e.trim((n||"").split(";")[0]),-1!=d.swfMimeTypes.indexOf(n)&&(i="maybe"));return i}}})});n.onNodeNamesPropertyModify(["audio","video"],["src","poster"],{set:function(){var e=this,t=n.data(e,"mediaelementBase")||n.data(e,"mediaelementBase",{});clearTimeout(t.loadTimer);t.loadTimer=setTimeout(function(){N(e);e=null},9)}});l=function(){n.addReady(function(t,i){e("video, audio",t).add(i.filter("video, audio")).each(function(){e.browser.msie&&8<n.browserVersion&&e.prop(this,"paused")&&!e.prop(this,"readyState")&&e(this).is('audio[preload="none"][controls]:not([autoplay])')?e(this).prop("preload","metadata").mediaLoad():N(this);if(r){var t,i,s=this,o=function(){var t=e.prop(s,"buffered");if(t){for(var n="",r=0,i=t.length;r<i;r++)n+=t.end(r);return n}},u=function(){var t=o();t!=i&&(i=t,e(s).triggerHandler("progress"))};e(this).on({"play loadstart progress":function(e){"progress"==e.type&&(i=o());clearTimeout(t);t=setTimeout(u,999)},"emptied stalled mediaerror abort suspend":function(e){"emptied"==e.type&&(i=!1);clearTimeout(t)}})}})})};t.track&&!o.track&&n.defineProperty(TextTrack.prototype,"shimActiveCues",{get:function(){return this._shimActiveCues||this.activeCues}});r?(n.isReady("mediaelement-core",!0),l(),n.ready("WINDOWLOAD mediaelement",b)):n.ready(u,l);e(function(){n.loader.loadList(["track-ui"])})})})(jQuery,Modernizr,jQuery.webshims);